# 1. About the Altibase Package Installer

This Altibase Package Installer is a Java-based installer that lets users easily install Altibase products such as the database server, client components, tools, and so forth.

### Altibase Home

When installing Altibase with the Altibase Package Installer, a home directory and APatch directory are generated.

The Altibase home directory is the default directory wherein Altibase software is installed.

#### Altibase Home Directory

When you install Altibase with the Altibase Package Installer, a home directory (wherein Altibase products are installed) is generated. The Altibase home directory takes the following values by default

-   When installing Altibase Server Products:

```bash
$HOME/altibase-server-<version>
```

-   When installing Altibase Client Products:

```bash
$HOME/altibase-client-<version>
```

### APatch Directory

Information about Altibase products that were installed with the Altibase Package Installer is stored in the APatch directory, under the Altibase home directory.

#### Structure and Contents of the APatch Directory

APatch is the name of the Altibase Package Installer directory and is located in the Altibase home directory

This directory contains files that store information about an installed product or a patch version:

-   patchinfo file

-   pkg_patch_<version>.txt file

-   altibase_base_install.log file

-   Backup directory

#### patchinfo File

This file contains:

- Information about the base release[^1] version and the patch of the currently installed Altibase product.
[^1]: The full package used for the initial installation  
- Information about the environment (such as the OS, OS patch, C/C++ compiler, and Java compiler are built)

!!! example "patchinfo File Example"

    ```bash
    PRODUCT_SIGNATURE=server-7.3.0.0.1-64-release
    PATCH_VERSION=0_0_0_0

    =======  OS INFO  =======
    Linux rhel6-x64 2.6.32-71.el6.x86_64 #1 SMP Wed Sep 1 01:33:01 EDT 2010 x86_64 x86_64 x86_64 GNU/Linux
    =======  PATCH INFO  =======
    2.6.32-71.el6.x86_64
    =======  COMPILER INFO  =======
    gcc version 4.6.3 (GCC)
    glibc 2.12
    =======  JAVA INFO  =======
    java version "1.5.0_22"
    Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_22-b03)
    Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_22-b03, mixed mode)
    ```

#### pkg_patch_x_x_x_x.txt File

This file is automatically generated as pkg_patch_<patch_version>.txt whenever a product is patched. This file contains the revision number of the source code modified to create the patch.

The following example shows the contents of the Patch directory after installing the base release 7.3.0.0.0 and the APatch directory after installing the patch 7.3.0.0.10:

!!! example "Patch/APatch Directory"
    === "Patch directory after installing the base release 7.3.0.0.0"
        ```bash
        $ ls
        pkg_patch_0_0_0_0.txt
        ```

    === "APatch directory after installing the patch 7.3.0.0.10"
        ```bash
        $ls
        pkg_patch_0_0_0_0.txt  pkg_patch_0_0_0_10.txt

        $cat pkg_patch_0_0_0_10.txt
        Repository: /altidev4/tags/altibase_7_3_0_0_10_tag/
        Revision: xxxxx
        Last Changed Rev: xxxxx
        ```

#### altibase_base_install.log file

All operations during the most recent installation are written to this file.

#### Backup Directory

When installing a new patch, the Altibase Package Installer creates backups of the patched files to which the patch is applied and stored it in the $ALTIBASE_HOME/APatch directory. Within this directory, these are separated backup directories generated for each patch. These backup files are used to roll back the patch in the future.

In addition, executable files that are used to uninstall or rollback patches are installed in the $ALTIBASE_HOME/APatch directory when a product is installed or patched.

!!! note
    HP platforms do not support automatic backups or rollbacks if the Package Installer is patched. Data and log files must be manually backup. 

!!! warning "Caution"
    Only files that are installed with the Package Installer are backedup to this backup directory; files that are generated after the product has been installed (such as data files and log files) are not backed up.

The following example shows the contents of the APatch directory, after installing the base release 7.3.0.0.0:

!!! example "APatch directory"
    === "After installing the base release 7.3.0.0.0"
        ```bash
        altibase_base_install.log  patchinfo
        pkg_patch_0_0_0_0.txt	      uninstall-base
        ```
        
        -   uninstall-base: the executable file needed to uninstall the base release 7.3.0.0.0.

    === "After installing the patch 7.3.0.0.10"
        ```bash
        altibase_base_install.log   pkg_patch_0_0_0_10.txt
        uninstall-p0_0_0_10           patchinfo
        rollback-p0_0_0_10/           pkg_patch_0_0_0_0.txt
        uninstall-base
        ```
        
        -   uninstall-base: the executable file needed to uninstall the base release 7.3.0.0.0.
        
        -   rollback-p0_0_0_10: the directory that contains backups of the files patched with 7.1.0.0.10.
        
        -   uninstall-p0_0_0_10: the executable file needed to delete the patch 7.1.0.0.10 and rollback to the previous version. These files are stored in the rollback-p0_0_0_10 directory.

